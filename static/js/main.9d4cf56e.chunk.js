(this["webpackJsonptrivia-test"]=this["webpackJsonptrivia-test"]||[]).push([[0],{31:function(e,t,a){e.exports=a(52)},36:function(e,t,a){},40:function(e,t,a){},48:function(e,t){},52:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(16),o=a.n(c),s=(a(36),a(4)),l=a(10),i=a(2),u=(a(40),a(14)),m=a(23),d=a(24),f=a(12),p={gravatarEmail:"",name:"",assertions:0,score:0},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_LOGIN":return Object(f.a)(Object(f.a)({},e),{},{gravatarEmail:t.gravatarEmail,name:t.name});case"NEW_ASSERTION":return Object(f.a)(Object(f.a)({},e),{},{assertions:e.assertions+1,score:e.score+t.score});default:return e}},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_TOKEN":return t.token;default:return e}},v=Object(u.combineReducers)({player:b,token:E}),g=Object(u.createStore)(v,Object(m.composeWithDevTools)(Object(u.applyMiddleware)(d.a)));window.Cypress&&(window.store=g);var h=g,w=a(17),y=a(3),N=a.n(y),j=a(11),O=a(25),k=a(26),C=a(30),S=a(29),x=function(){var e=Object(j.a)(N.a.mark((function e(){var t,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://opentdb.com/api_token.php?command=request",e.next=3,fetch("https://opentdb.com/api_token.php?command=request");case 3:return t=e.sent,e.next=6,t.json();case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(e,t){return{type:"SAVE_LOGIN",gravatarEmail:e,name:t}},A=function(e,t){return{type:"SAVE_LOGIN_TOKEN_ERROR",gravatarEmail:e,name:t}},R=function(e){return{type:"SAVE_TOKEN",token:e}};var _=function(e){Object(C.a)(a,e);var t=Object(S.a)(a);function a(e){var n;return Object(O.a)(this,a),(n=t.call(this,e)).redirectToPlay=Object(j.a)(N.a.mark((function e(){var t,a,r,c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.props.saveTokenToStore,a=n.state,r=a.playerEmail,c=a.playerName,t(r,c),n.setState({willRedirectToGame:!0});case 4:case"end":return e.stop()}}),e)}))),n.redirectToConfig=function(){n.setState({willRedirectToConfig:!0})},n.saveInfoToState=function(e){var t=e.target,a=t.value,r=t.name;n.setState(Object(w.a)({},r,a))},n.state={playerEmail:"",playerName:"",willRedirectToGame:!1,willRedirectToConfig:!1},n}return Object(k.a)(a,[{key:"render",value:function(){var e=this.state,t=e.playerEmail,a=e.playerName,n=e.willRedirectToGame,c=e.willRedirectToConfig;return r.a.createElement("main",{style:{backgroundColor:"#290661"}},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row justify-content-center align-items-center vh-100"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row"},r.a.createElement("img",{src:"https://i.imgur.com/qZJ52co.png",alt:"lorem picsum",style:{width:"25vw"},className:"img-thumbnail mb-3 p-2"})),r.a.createElement("form",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("label",{htmlFor:"femail",className:"form-label",style:{color:"white"}},"Email"),r.a.createElement("input",{type:"email",name:"playerEmail",id:"femail",onChange:this.saveInfoToState,"data-testid":"input-gravatar-email",className:"form-control"}),r.a.createElement("label",{htmlFor:"fname",className:"form-label mt-2",style:{color:"white"}},"Name"),r.a.createElement("input",{type:"text",name:"playerName",id:"fname",onChange:this.saveInfoToState,"data-testid":"input-player-name",className:"form-control"}))),r.a.createElement("div",{className:"row mt-3"},r.a.createElement("div",{className:"col"},r.a.createElement("label",{htmlFor:"fsbmt"},r.a.createElement("input",{type:"button",name:"button-sbmt",id:"fsbmt",value:"Play",disabled:!(""!==t&&""!==a),onClick:this.redirectToPlay,"data-testid":"btn-play",className:"btn btn-primary"})),r.a.createElement("button",{type:"button",name:"button-config",onClick:this.redirectToConfig,"data-testid":"btn-settings",className:"btn btn-secondary ms-2"},"Configurations"))))))),c&&r.a.createElement(i.a,{to:"/config"}),n&&r.a.createElement(i.a,{to:"/game"}))}}]),a}(n.Component),I=Object(s.b)(null,(function(e){return{saveTokenToStore:function(t,a){return e(function(e,t){return function(){var a=Object(j.a)(N.a.mark((function a(n){var r,c;return N.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,x();case 3:r=a.sent,c=r.token,n(T(e,t)),n(R(c)),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),n(A(e,t));case 12:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e){return a.apply(this,arguments)}}()}(t,a))}}}))(_);var q=function(){return r.a.createElement("div",null,r.a.createElement(l.b,{to:"/"},"Login"),r.a.createElement("h3",{"data-testid":"settings-title"},"Configuration"))},B=a(7),W=a(28),G=a.n(W),P=function(e){var t=function(e){return e.trim().toLowerCase()}(e),a=G()(t).toString();return"https://www.gravatar.com/avatar/".concat(a)};var J=function(){var e=Object(s.d)((function(e){return e.player})),t=P(e.gravatarEmail);return r.a.createElement("header",null,r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("img",{src:t,alt:"Imagem de Perfil","data-testid":"header-profile-picture",style:{borderRadius:"50%",width:"10vw"},className:"img-fluid"})),r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("p",{"data-testid":"header-player-name",className:"fs-3 text-uppercase mt-1"},e.name))),r.a.createElement("p",{"data-testid":"header-score",className:"p-3 rounded",style:{backgroundColor:"#8540f5"}},"Score:",r.a.createElement("span",{className:"ms-2"},e.score)))};var L=function(e){for(var t=0;t<e.length;t+=1){var a=Math.floor(Math.random()*e.length),n=e[t];e[t]=e[a],e[a]=n}return e};var V=function(e,t){var a=0;return"hard"===e&&(a=3),"medium"===e&&(a=2),"easy"===e&&(a=1),10+t*a};var F=function(e){var t=e.correctAnswer,a=e.incorrectAnswers,c=e.showButton,o=e.showWrongAnswerColor,l=e.showRightAnswerColor,i=e.wrongAnswerColor,u=e.rightAnswerColor,m=e.setCount,d=e.count,f=e.setDisableButtons,p=e.disabledButtons,b=e.difficulty,E=Object(s.c)(),v=Object(n.useState)([]),g=Object(B.a)(v,2),h=g[0],w=g[1],y=t,N=0;Object(n.useEffect)((function(){var e=[t];a.forEach((function(t,a){e[a+1]=t})),w(L(e))}),[t,a]),Object(n.useEffect)((function(){var e=setTimeout((function(){m(d-1)}),1e3);return!0===p&&clearTimeout(e),0===d&&(clearTimeout(e),f(!0),l({border:"3px solid rgb(6, 240, 15)"}),o({border:"3px solid rgb(255, 0, 0)"}),c(!0)),function(){return clearTimeout(e)}}),[m,d,l,o,c,f,p]);var j=function(e){var t=e.target;if(c(!0),f(!0),l({border:"3px solid rgb(6, 240, 15)"}),o({border:"3px solid rgb(255, 0, 0)"}),"right"===t.value){var a=V(b,d);E({type:"NEW_ASSERTION",score:a})}};return r.a.createElement("ul",{className:"list-group list-group-flush"},h.map((function(e,t){return e===y?r.a.createElement("li",{className:"list-group-item",key:t},r.a.createElement("button",{type:"button",style:u,value:"right","data-testid":"correct-answer",onClick:j,disabled:p},e)):(N+=1,r.a.createElement("li",{className:"list-group-item",key:t},r.a.createElement("button",{type:"button",style:i,value:"wrong","data-testid":"wrong-answer-".concat(N-1),onClick:j,disabled:p},e)))})),r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-auto mt-3"},r.a.createElement("p",null,d))))};var D=function(e){var t=e.questions,a={border:"3px solid white"},c=Object(i.f)(),o=Object(s.d)((function(e){return e.player})),l=P(o.gravatarEmail),u=Object(n.useState)(0),m=Object(B.a)(u,2),d=m[0],f=m[1],p=Object(n.useState)(!1),b=Object(B.a)(p,2),E=b[0],v=b[1],g=Object(n.useState)(a),h=Object(B.a)(g,2),w=h[0],y=h[1],N=Object(n.useState)(a),j=Object(B.a)(N,2),O=j[0],k=j[1],C=Object(n.useState)(30),S=Object(B.a)(C,2),x=S[0],T=S[1],A=Object(n.useState)(!1),R=Object(B.a)(A,2),_=R[0],I=R[1];return r.a.createElement("main",null,r.a.createElement("section",null,r.a.createElement("h3",{"data-testid":"question-category"},t[d].category)),r.a.createElement("article",{"data-testid":"answer-options",style:{color:"#495057"}},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},r.a.createElement("p",{"data-testid":"question-text"},t[d].question)),r.a.createElement(F,{correctAnswer:t[d].correct_answer,incorrectAnswers:t[d].incorrect_answers,difficulty:t[d].difficulty,showButton:v,showWrongAnswerColor:y,showRightAnswerColor:k,wrongAnswerColor:w,rightAnswerColor:O,count:x,setCount:T,setDisableButtons:I,disabledButtons:_}))),E&&r.a.createElement("button",{type:"button",onClick:function(){if(d<4)f(d+1),v(!1),y(a),k(a),T(30),I(!1);else{var e={name:o.name,score:o.score,picture:l},t=JSON.parse(localStorage.getItem("ranking"));t.push(e),console.log(t),localStorage.setItem("ranking",JSON.stringify(t)),c.push("/feedback")}},"data-testid":"btn-next",className:"mt-3 btn btn-primary"},"Next"))},K=a(49),M=function(){var e=Object(j.a)(N.a.mark((function e(t){var a,n,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="https://opentdb.com/api.php?amount=5&token=".concat(t),e.next=3,fetch(a);case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=Object(j.a)(N.a.mark((function e(t){var a,n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(t);case 2:return a=e.sent,n=a.results.map((function(e){return Object(f.a)(Object(f.a)({},e),{},{question:K.decode(e.question)})})),a.results=n,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var $=function(){var e=Object(s.c)(),t=Object(s.d)((function(e){return e})).token,a=Object(n.useState)({}),c=Object(B.a)(a,2),o=c[0],l=c[1];return Object(n.useEffect)((function(){localStorage.ranking||localStorage.setItem("ranking","[]")}),[]),Object(n.useEffect)((function(){(function(){var a=Object(j.a)(N.a.mark((function a(){var n,r;return N.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Z(t);case 2:if(n=a.sent,console.log(n),3!==n.response_code){a.next=12;break}return a.next=7,x();case 7:return r=a.sent,e(R(r)),a.next=11,Z(r);case 11:n=a.sent;case 12:l(n);case 13:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}})()()}),[t,e]),Object(n.useEffect)((function(){document.body.style.backgroundColor="#290661"}),[]),r.a.createElement("div",null,r.a.createElement("div",{className:"container",style:{color:"white"}},r.a.createElement("div",{className:"row justify-content-center align-items-center vh-100"},r.a.createElement("div",{className:"col-auto"},r.a.createElement(J,null),o.results&&r.a.createElement(D,{questions:o.results})))))};var z=function(){var e=Object(s.d)((function(e){return e.player})),t=Object(n.useState)(""),a=Object(B.a)(t,2),c=a[0],o=a[1];return Object(n.useEffect)((function(){e.assertions<3?o("Could be better..."):o("Well done!")}),[e]),Object(n.useEffect)((function(){document.body.style.backgroundColor="#290661"}),[]),r.a.createElement("div",{className:"vh-100"},r.a.createElement("div",{className:"container text-white p-5"},r.a.createElement(J,null),r.a.createElement("section",{className:""},r.a.createElement("div",{className:"row justify-content-center rounded",style:{backgroundColor:"#140330"}},r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row justify-content-center mt-3"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("p",{className:"fs-4"},"Thiago says,"))),r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("p",{"data-testid":"feedback-text",className:"fs-1"},c))))),r.a.createElement("div",{style:{backgroundColor:"#8540f5"},className:"p-2 rounded mt-3"},r.a.createElement("p",{"data-testid":"feedback-total-score",className:"mt-1 fs-4"},r.a.createElement("span",null,"All your score this time: "),e.score),r.a.createElement("hr",{style:{backgroundColor:"black"},className:"p-1"}),r.a.createElement("p",{"data-testid":"feedback-total-question",className:"mb-1 fs-4"},r.a.createElement("span",null,"Number of correct shots: "),e.assertions))),r.a.createElement("div",{className:"row justify-content-around gap-3 text-center mt-3"},r.a.createElement(l.b,{"data-testid":"btn-play-again",to:"/",className:"col btn btn-light"},"Play Again"),r.a.createElement(l.b,{"data-testid":"btn-ranking",to:"/ranking",className:"col btn btn-light"},"Ranking"))))};var H=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{"data-testid":"ranking-title"},"Tela de ranking"),r.a.createElement(l.b,{"data-testid":"btn-go-home",to:"/"},"Play Again"))};function Q(){return r.a.createElement(s.a,{store:h},r.a.createElement(l.a,null,r.a.createElement(i.b,{exact:!0,path:"/",component:I}),r.a.createElement(i.b,{path:"/config",component:q}),r.a.createElement(i.b,{path:"/game",component:$}),r.a.createElement(i.b,{path:"/feedback",component:z}),r.a.createElement(i.b,{path:"/ranking",component:H})))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(51);o.a.render(r.a.createElement(Q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[31,1,2]]]);
//# sourceMappingURL=main.9d4cf56e.chunk.js.map